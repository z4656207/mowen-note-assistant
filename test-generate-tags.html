<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生成标签功能测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .feature-highlight {
            background: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }
        
        .code-block {
            background: #f8f8f8;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        
        .test-steps {
            background: #fff3e0;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .test-steps ol {
            margin: 0;
            padding-left: 20px;
        }
        
        .test-steps li {
            margin: 8px 0;
        }
    </style>
</head>

<body>
    <h1>🏷️ 墨问笔记助手 - 生成标签功能测试</h1>

    <div class="feature-highlight">
        <h2>✨ 新功能介绍</h2>
        <p>现在您可以控制是否让AI为您的笔记生成相关标签！这个功能默认是<strong>关闭</strong>的，您可以根据需要开启。</p>
    </div>

    <div class="test-section">
        <h2>📋 测试步骤</h2>
        <div class="test-steps">
            <ol>
                <li>打开墨问笔记助手扩展（点击扩展图标或使用侧边栏）</li>
                <li>在发布设置区域找到新增的<strong>"生成标签"</strong>开关</li>
                <li>测试开关的两种状态：
                    <ul>
                        <li><strong>关闭状态</strong>（默认）：AI不会生成标签</li>
                        <li><strong>开启状态</strong>：AI会为内容生成1-3个相关标签</li>
                    </ul>
                </li>
                <li>点击"提取并发布到墨问"按钮</li>
                <li>查看生成的笔记是否按照设置包含或不包含标签</li>
            </ol>
        </div>
    </div>

    <div class="test-section">
        <h2>🎯 测试内容</h2>
        <p>这是一篇关于<strong>人工智能</strong>和<strong>机器学习</strong>的技术文章。文章讨论了深度学习在自然语言处理中的应用，包括：</p>

        <ul>
            <li><strong>Transformer架构</strong>：革命性的注意力机制</li>
            <li><strong>BERT模型</strong>：双向编码器表示</li>
            <li><strong>GPT系列</strong>：生成式预训练模型</li>
            <li><strong>应用场景</strong>：文本分类、情感分析、机器翻译</li>
        </ul>

        <div class="feature-highlight">
            <h3>🔍 预期标签示例</h3>
            <p>当开启"生成标签"功能时，AI可能会为这篇文章生成如下标签：</p>
            <div class="code-block">
                ["人工智能", "机器学习", "深度学习"]
            </div>
            <p>当关闭"生成标签"功能时，标签字段应该为空数组：</p>
            <div class="code-block">
                []
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>⚙️ 技术实现</h2>
        <p>这个功能的实现包括以下几个方面：</p>

        <h3>前端界面</h3>
        <ul>
            <li>在popup.html和sidepanel.html中添加了"生成标签"开关</li>
            <li>默认状态为关闭（unchecked）</li>
            <li>开关状态会保存到Chrome存储中</li>
        </ul>

        <h3>JavaScript逻辑</h3>
        <ul>
            <li>popup.js和sidepanel.js中添加了generateTags设置的处理</li>
            <li>设置会传递给后台脚本进行处理</li>
            <li>支持设置的加载、保存和状态同步</li>
        </ul>

        <h3>后台处理</h3>
        <ul>
            <li>background.js根据generateTags设置调整AI提示词</li>
            <li>当关闭时，提示词明确要求不生成标签</li>
            <li>发布到墨问时也会根据设置决定是否传递标签</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🧪 验证要点</h2>
        <div class="test-steps">
            <ol>
                <li><strong>界面显示</strong>：确认新的"生成标签"开关正确显示</li>
                <li><strong>默认状态</strong>：确认开关默认为关闭状态</li>
                <li><strong>状态保存</strong>：切换开关后刷新页面，状态应该保持</li>
                <li><strong>功能生效</strong>：
                    <ul>
                        <li>关闭时：生成的笔记不包含标签</li>
                        <li>开启时：生成的笔记包含相关标签</li>
                    </ul>
                </li>
                <li><strong>错误处理</strong>：确认在各种情况下功能都能正常工作</li>
            </ol>
        </div>
    </div>

    <div class="feature-highlight">
        <h2>💡 使用建议</h2>
        <ul>
            <li><strong>个人笔记</strong>：如果您喜欢自己管理标签，可以关闭此功能</li>
            <li><strong>快速整理</strong>：如果您希望AI帮助分类内容，可以开启此功能</li>
            <li><strong>混合使用</strong>：可以根据不同类型的内容灵活切换</li>
        </ul>
    </div>

    <script>
        // 添加一些交互效果
        document.addEventListener('DOMContentLoaded', function() {
            console.log('生成标签功能测试页面已加载');

            // 添加点击效果
            const sections = document.querySelectorAll('.test-section, .feature-highlight');
            sections.forEach(section => {
                section.addEventListener('click', function() {
                    this.style.transform = 'scale(1.02)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            });
        });
    </script>
</body>

</html>