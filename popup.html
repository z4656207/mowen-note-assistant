<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>墨问笔记助手</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="logo">
                <img src="icons/icon48.png" alt="墨问笔记助手" class="logo-img">
                <h1 class="title">墨问笔记助手</h1>
            </div>
            <div class="header-actions">
                <button id="settingsBtn" class="settings-btn" title="设置">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                </button>
                <button id="toggleModeBtn" class="toggle-mode-btn" title="切换到侧边栏模式">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <rect x="3" y="3" width="7" height="9"></rect>
                        <rect x="14" y="3" width="7" height="5"></rect>
                        <rect x="14" y="12" width="7" height="9"></rect>
                    </svg>
                </button>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main">
            <!-- 页面信息预览 -->
            <div id="pageInfo" class="page-info">
                <div class="page-title" id="pageTitle">正在获取页面信息...</div>
                <div class="page-url" id="pageUrl"></div>
            </div>

            <!-- 发布设置 -->
            <div class="publish-settings">
                <div class="setting-item">
                    <label class="toggle-label">
                        <input type="checkbox" id="autoPublishToggle" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">发布公开笔记</span>
                    </label>
                    <div class="setting-help">
                        关闭后笔记将发布为私有
                    </div>
                </div>

                <div class="setting-item">
                    <label class="toggle-label">
                        <input type="checkbox" id="fullTextModeToggle">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">全文整理模式</span>
                    </label>
                    <div class="setting-help">
                        开启后将整理全文内容，关闭则生成总结
                    </div>
                </div>

                <div class="setting-item">
                    <label class="toggle-label">
                        <input type="checkbox" id="generateTagsToggle">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">生成标签</span>
                    </label>
                    <div class="setting-help">
                        开启后AI将为笔记生成相关标签
                    </div>
                </div>
            </div>

            <!-- 自定义提示词设置 -->
            <div class="custom-prompt-settings">
                <div class="setting-header">
                    <div class="setting-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 20h9"></path>
                            <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                        </svg> 自定义提示词
                    </div>
                    <div class="setting-description">
                        添加额外的提示信息来指导AI生成更符合需求的内容
                    </div>
                </div>

                <div class="custom-prompt-input">
                    <textarea id="customPromptInput" class="custom-prompt-textarea" placeholder="在此输入自定义提示词，例如：请重点关注技术细节、使用专业术语、突出关键观点等" rows="3" maxlength="500"></textarea>
                    <div class="char-counter">
                        <span id="charCount">0</span>/500
                    </div>
                </div>
            </div>

            <!-- 操作按钮 -->
            <div class="actions">
                <button id="extractBtn" class="btn btn-primary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14,2 14,8 20,8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
            <polyline points="10,9 9,9 8,9"></polyline>
          </svg>
          <span id="extractBtnText">提取并发布到墨问</span>
        </button>

                <button id="cancelBtn" class="btn btn-cancel" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M15 9l-6 6"></path>
            <path d="M9 9l6 6"></path>
          </svg>
          取消任务
        </button>

                <button id="previewBtn" class="btn btn-secondary" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
          预览内容
        </button>

                <button id="diagnoseBtn" class="btn btn-secondary" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="2"></circle>
            <path d="M12 2v4m0 12v4m10-6h-4M6 12H2"></path>
          </svg>
          诊断问题
        </button>
            </div>

            <!-- 状态显示 -->
            <div id="status" class="status"></div>

            <!-- 进度指示器 -->
            <div id="progress" class="progress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="progress-text">正在处理...</div>
            </div>

            <!-- 结果显示 -->
            <div id="result" class="result" style="display: none;">
                <div class="result-header">
                    <h3>处理结果</h3>
                    <button id="closeResult" class="close-btn">×</button>
                </div>
                <div class="result-content" id="resultContent"></div>
            </div>
        </main>

        <!-- 底部 -->
        <footer class="footer">
            <div class="footer-links">
                <a href="#" id="helpLink">使用帮助</a>
                <a href="#" id="feedbackLink">意见反馈</a>
            </div>
        </footer>
    </div>

    <script src="popup.js"></script>
</body>

</html>